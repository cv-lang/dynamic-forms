@using Cvl.DynamicForms.Core.Models.ContentControls

<RadzenDatePicker @bind-Value="@Element.Value"
Placeholder="@Element.Placeholder"
MinDate="@MinDate"
MaxDate="@MaxDate"
DateFormat="@DateFormat" 
Disabled="@Element.IsReadOnly"
Style="width: 100%;"
Change="OnChange"
/>

@code {
    [Parameter] public DatePicker Element { get; set; }
    public DateTime? MinDate
    {
        get
        {
            DateTime val = DateTime.Now;
            if (DateTime.TryParse(Element.Min, out val))
            {
                return val;
            }
            return null;
        }
    }

    public DateTime? MaxDate
    {
        get
        {
            DateTime val = DateTime.Now;
            if (DateTime.TryParse(Element.Max, out val))
            {
                return val;
            }
            return null;
        }
    }

    public string DateFormat => Element.Format ?? "YYYY-MM-dd";

    private void OnChange(DateTime? value)
    {
        // Element.Value = value;

        // if (Element.OnChange != null)
        // {
        //     Element.OnChange.Invoke(value);
        // }
    }
}
